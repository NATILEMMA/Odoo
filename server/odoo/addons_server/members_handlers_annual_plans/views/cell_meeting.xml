<?xml version="1.0"?>

<odoo>

    <record id="meeting_cell_tree" model="ir.ui.view">
        <field name="name">Meeting Cells</field>
        <field name="model">meeting.cells</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="for_which_members" invisible="1"/>
                <field name="cell_id"/>
                <field name="main_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>


    <record id="meeting_cell_form" model="ir.ui.view">
        <field name="name">Meeting Cells</field>
        <field name="model">meeting.cells</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" states="started" type="object" groups="member_minor_configuration.member_group_main_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <!-- <button name="start_meeting" string="Start" states="pending" type="object" groups="member_minor_configuration.member_group_main_assembler" class="btn btn-success"  confirm="Are you sure you want to Start the Meeting?"/> -->
                    <button name="cancel_meeting" string="Cancel" states="pending" type="object" groups="member_minor_configuration.member_group_main_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header>  
                <sheet>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="main_id" string="Main Office" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="for_which_members" invisible="1"/>
                            <field name="cell_id" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}" placeholder="Eg. Meeting Hall"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" class="oe_inline" widget="float_time" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                        <page string="Notes"  attrs="{'invisible': [('state', '=', 'new')], 'readonly': [('state', '=', 'cancelled')]}">
                            <field name="note_id"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="meeting_cell_action" model="ir.actions.act_window">
        <field name="name">Meeting Cells</field>
        <field name="res_model">meeting.cells</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('main_id', '=', active_id)]</field>
    </record>

    <record id="meeting_eachother_tree_cell" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="cell_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="meeting_eachother_form_cell" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" type="object" states="started" groups="member_minor_configuration.member_group_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <!-- <button name="start_meeting" string="Start" type="object" states="pending" groups="member_minor_configuration.member_group_assembler" class="btn btn-success" confirm="Are you sure you want to Start the Meeting?"/> -->
                    <button name="cancel_meeting" string="Cancel" type="object" states="pending" groups="member_minor_configuration.member_group_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header> 
                <sheet>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="cell_id" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}" placeholder="Eg. Meeting Hall"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                        <page string="Notes"  attrs="{'invisible': [('state', '=', 'new')], 'readonly': [('state', '=', 'cancelled')]}">
                            <field name="note_id"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="meeting_eachother_action_cell" model="ir.actions.act_window">
        <field name="name">Meeting Eachother</field>
        <field name="res_model">meeting.each.other</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('cell_id', '=', active_id)]</field>
    </record>

    <record model="ir.actions.act_window.view" id="cell_meeting_eachother_tree">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="meeting_eachother_tree_cell"/>
        <field name="act_window_id" ref="meeting_eachother_action_cell"/>
    </record>

    <record model="ir.actions.act_window.view" id="cell_meeting_eachother_form">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="meeting_eachother_form_cell"/>
        <field name="act_window_id" ref="meeting_eachother_action_cell"/>
    </record>

    <record id="meeting_eachother_tree_main" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other.main</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="main_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>


    <record id="meeting_eachother_form_main" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other.main</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" type="object" states="started" groups="member_minor_configuration.member_group_main_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <button name="start_meeting" string="Start" type="object" states="pending" groups="member_minor_configuration.member_group_main_assembler" class="btn btn-success"  confirm="Are you sure you want to Start the Meeting?"/>
                    <button name="cancel_meeting" string="Cancel" type="object" states="pending" groups="member_minor_configuration.member_group_main_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header> 
                <sheet>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="main_id" string="Main Office" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}" placeholder="Eg. Meeting Hall"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                        <page string="Notes"  attrs="{'invisible': [('state', '=', 'new')], 'readonly': [('state', '=', 'cancelled')]}">
                            <field name="note_id"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="meeting_eachother_action_main" model="ir.actions.act_window">
        <field name="name">Meeting Eachother</field>
        <field name="res_model">meeting.each.other.main</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('main_id', '=', active_id)]</field>
    </record>

    <record model="ir.actions.act_window.view" id="main_meeting_eachother_tree">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="meeting_eachother_tree_main"/>
        <field name="act_window_id" ref="meeting_eachother_action_main"/>
    </record>

    <record model="ir.actions.act_window.view" id="main_meeting_eachother_form">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="meeting_eachother_form_main"/>
        <field name="act_window_id" ref="meeting_eachother_action_main"/>
    </record>

</odoo>