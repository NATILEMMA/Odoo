<?xml version="1.0"?>

<odoo>

    <!-- This record will handle the member assembly -->
    <record id="member_assembly_cell_meeting_tree" model="ir.ui.view">
        <field name="name">Members in Meeting</field>
        <field name="model">member.assembly</field>
        <field name="arch" type="xml">
            <tree editable="bottom" create="false" duplicate="false">
                <field name="partner_id" readonly="1"/>
                <field name="wereda_id" readonly="1"/>
                <field name="main_office_id" readonly="1"/>
                <field name="cell_id" readonly="1"/>
                <field name="cell_league_id" readonly="1"/>
                <field name="assembly_presence" string="Presence"/>
            </tree>
        </field>
    </record>

    <record id="member_assembly_cell_with_main_meeting_action" model="ir.actions.act_window">
        <field name="name">Members in Meeting</field>
        <field name="res_model">member.assembly</field>
        <field name="view_mode">tree,pivot,graph</field>
        <field name="limit">40</field>
        <field name="view_id" ref="member_assembly_cell_meeting_tree"/>
        <field name="domain">[('meeting_cell_with_main_office_id', '=', active_id)]</field>
    </record>

    <record id="member_assembly_cell_meeting_action" model="ir.actions.act_window">
        <field name="name">Members in Meeting</field>
        <field name="res_model">member.assembly</field>
        <field name="view_mode">tree,pivot,graph</field>
        <field name="limit">40</field>
        <field name="view_id" ref="member_assembly_cell_meeting_tree"/>
        <field name="domain">[('meeting_cell_together_id', '=', active_id)]</field>
    </record>

    <record id="meeting_cell_tree" model="ir.ui.view">
        <field name="name">Meeting Cells</field>
        <field name="model">meeting.cells</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="for_which_members" invisible="1"/>
                <field name="cell_id"/>
                <field name="cell_id_league" string="League Cell"/>
                <field name="main_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>


    <record id="meeting_cell_form" model="ir.ui.view">
        <field name="name">Meeting Cells</field>
        <field name="model">meeting.cells</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" states="started" type="object" groups="members_custom.member_group_main_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <button name="start_meeting" string="Start" states="pending" type="object" groups="members_custom.member_group_main_assembler" class="btn btn-success"  confirm="Are you sure you want to Start the Meeting?"/>
                    <button name="cancel_meeting" string="Cancel" states="pending" type="object" groups="members_custom.member_group_main_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header>  
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="%(member_assembly_cell_with_main_meeting_action)d" type="action" icon="fa-users" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])]}">
                            <field name="participant_counter" string="Participants" widget="statinfo" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])]}"/>
                        </button>
                    </div>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="main_id" string="Main Office"/>
                            <field name="for_which_members" invisible="1"/>
                            <field name="cell_id" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])], 'invisible': [('for_which_members', '=', 'league')], 'required': [('for_which_members', '=', 'member')]}"/>
                            <field name="cell_id_league" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])], 'invisible': [('for_which_members', '=', 'member')], 'required': [('for_which_members', '=', 'league')]}"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" class="oe_inline" widget="float_time" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="meeting_cell_action" model="ir.actions.act_window">
        <field name="name">Meeting Cells</field>
        <field name="res_model">meeting.cells</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('main_id', '=', active_id)]</field>
    </record>

    <record id="meeting_eachother_tree_cell" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="cell_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="meeting_eachother_form_cell" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" type="object" states="started" groups="members_custom.member_group_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <button name="start_meeting" string="Start" type="object" states="pending" groups="members_custom.member_group_assembler" class="btn btn-success" confirm="Are you sure you want to Start the Meeting?"/>
                    <button name="cancel_meeting" string="Cancel" type="object" states="pending" groups="members_custom.member_group_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header> 
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="%(member_assembly_cell_meeting_action)d" type="action" icon="fa-users" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])]}">
                            <field name="participant_counter" string="Participants" widget="statinfo" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])]}"/>
                        </button>
                    </div>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="cell_id"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="meeting_eachother_action_cell" model="ir.actions.act_window">
        <field name="name">Meeting Eachother</field>
        <field name="res_model">meeting.each.other</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('cell_id', '=', active_id)]</field>
    </record>

    <record model="ir.actions.act_window.view" id="cell_meeting_eachother_tree">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="meeting_eachother_tree_cell"/>
        <field name="act_window_id" ref="meeting_eachother_action_cell"/>
    </record>

    <record model="ir.actions.act_window.view" id="cell_meeting_eachother_form">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="meeting_eachother_form_cell"/>
        <field name="act_window_id" ref="meeting_eachother_action_cell"/>
    </record>

    <record id="meeting_eachother_tree_main" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other.main</field>
        <field name="arch" type="xml">
            <tree decoration-muted="state == 'finished'" decoration-danger="state == 'cancelled'" decoration-info="state == 'pending'" decoration-success="state == 'started'">
                <field name="name"/>
                <field name="year"/>
                <field name="main_id"/>
                <field name="date_of_meeting"/>
                <field name="start_time" widget="float_time"/>
                <field name="end_time" widget="float_time"/>
                <field name="state"/>
            </tree>
        </field>
    </record>


    <record id="meeting_eachother_form_main" model="ir.ui.view">
        <field name="name">Meeting Eachother</field>
        <field name="model">meeting.each.other.main</field>
        <field name="arch" type="xml">
            <form duplicate="false">
                <header>
                    <button name="finished_meeting" string="Finish" type="object" states="started" groups="members_custom.member_group_main_assembler" class="oe_highlight" confirm="Are you sure you want to Finish Meeting?"/>
                    <button name="start_meeting" string="Start" type="object" states="pending" groups="members_custom.member_group_main_assembler" class="btn btn-success"  confirm="Are you sure you want to Start the Meeting?"/>
                    <button name="cancel_meeting" string="Cancel" type="object" states="pending" groups="members_custom.member_group_main_assembler" confirm="Are you sure you want to Cancel Meeting?"/>
                    <field name="state" widget="statusbar" statusbar_visible="pending,started,finished,cancelled"/>
                </header> 
                <sheet>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="main_id" string="Main Office"/>
                            <field name="year" options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="date_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <field name="next_date_of_meeting" attrs="{'invisible': [('state', 'not in', ['started', 'finished'])], 'required': [('state', '=', 'started')]}"/>
                        </group>
                        <group>
                            <field name="x_css" force_save="1" nolabel="1" invisible="1"/>
                            <field name="place_of_meeting" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            <label for="start_time" string="Start Time"/>
                            <div>
                                <field name="start_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/> till <field name="end_time" widget="float_time" class="oe_inline" attrs="{'readonly': [('state', 'not in', ['new'])]}"/>
                            </div>
                        </group>
                    </group>
                    <notebook>
                        <page string="Meeting Minute" attrs="{'invisible': [('state', 'in', ['new', 'pending', 'cancelled'])]}">
                            <field name="meeting_minute" widget="html" options="{'safe': True}"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="meeting_eachother_action_main" model="ir.actions.act_window">
        <field name="name">Meeting Eachother</field>
        <field name="res_model">meeting.each.other.main</field>
        <field name="view_mode">tree,form,pivot,graph</field>
        <field name="limit">20</field>
        <field name="domain">[('main_id', '=', active_id)]</field>
    </record>

    <record model="ir.actions.act_window.view" id="main_meeting_eachother_tree">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="meeting_eachother_tree_main"/>
        <field name="act_window_id" ref="meeting_eachother_action_main"/>
    </record>

    <record model="ir.actions.act_window.view" id="main_meeting_eachother_form">
        <field name="sequence" eval="2"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="meeting_eachother_form_main"/>
        <field name="act_window_id" ref="meeting_eachother_action_main"/>
    </record>

    <record id="member_cell_action_search" model="ir.ui.view">
        <field name="name">Member's Cell</field>
        <field name="model">member.cells</field>
        <field name="arch" type="xml">
            <search string="Member's Cell">
                <group expand="0" string="Group By" colspan="10" col="8">
                    <filter string="Members" name="members" context="{'group_by': 'for_which_members'}"/>
                    <filter string="Member Organization" name="member_org" context="{'group_by': 'member_cell_type_id'}"/>
                    <filter string="League Organization" name="league_org" context="{'group_by': 'league_cell_type_id'}"/>
                    <filter string="Main Office" name="office" context="{'group_by': 'main_office'}"/>
                    <filter string="Woreda" name="woreda" context="{'group_by': 'wereda_id'}"/>
                    <filter string="Subcity" name="subcity" context="{'group_by': 'subcity_id'}"/>
                </group>
            </search>
        </field>
    </record>

   <record id="member_cell_action" model="ir.actions.act_window">
       <field name="name">Member's Cell</field>
       <field name="res_model">member.cells</field>
       <field name="view_mode">tree,form,pivot,graph</field>
       <field name="search_view_id" ref="member_cell_action_search"/>
       <field name="domain">['|', '|', '|', '|', '|', '|', '|', '|', '|', '|', '|', '|', '|',
                            ('cell_admin', '=', uid),
                            ('cell_assembler', '=', uid),
                            ('cell_finance', '=', uid),
                            ('main_office.main_assembler', '=', uid),
                            ('main_office_league.main_assembler', '=', uid),
                            ('main_office.main_admin', '=', uid),
                            ('main_office_league.main_admin', '=', uid),
                            ('main_office.main_finance', '=', uid),
                            ('main_office_league.main_finance', '=', uid),
                            ('wereda_id.branch_manager', '=', uid),
                            ('subcity_id.parent_manager', '=', uid),
                            ('subcity_id.city_id.city_manager', 'in', [uid]),
                            ('subcity_id.city_id.transfer_handler', '=', uid),
                            ('subcity_id.city_id.responsible_id.system_admin', '=', uid)]</field>
   </record>

   <record id="member_cell_tree" model="ir.ui.view">
       <field name="name">Member's Cell</field>
       <field name="model">member.cells</field>
       <field name="arch" type="xml">
           <tree>
                <field name="user_id" invisible="1"/>
                <field name="for_which_members" invisible="1"/>
                <field name="member_cell_type_id"/>
                <field name="league_cell_type_id"/>
                <field name="name"/>
                <field name="main_office" string="Member Main Office"/>
                <field name="main_office_league" string="League Main Office"/>
                <field name="subcity_id"/>
                <field name="wereda_id"/>
           </tree>
       </field>
   </record>

   <record id="member_cell_form" model="ir.ui.view">
       <field name="name">Member's Cell</field>
       <field name="model">member.cells</field>
       <field name="arch" type="xml">
           <form duplicate="false">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="%(meeting_eachother_action_cell)d" type="action" icon="fa-users">
                        <field name="pending_meetings" string="Pending Meetings" widget="statinfo"/>
                        </button>
                    </div>
                    <h1>
                    <field name="name"/>
                    </h1>
                    <div>
                        <group col="3">
                            <group>
                                <field name="members" invisible="1"/>
                                <field name="user_id" invisible="1"/>
                                <field name="subcity_id" attrs="{'readonly': [('members', '=', True)]}" force_save="1" options="{'no_create': True, 'no_create_edit': True}"/>
                                <field name="wereda_id" attrs="{'readonly': [('members', '=', True)]}" force_save="1" options="{'no_create': True, 'no_create_edit': True}"/>
                                <field name="total_membership_fee" widget="monetary"   readonly="1"/>
                                <field name="is_mixed"/>
                            </group>
                            <group>
                                <field name="for_which_members" attrs="{'readonly': [('members', '=', True)]}" force_save="1"/>
                                <field name="member_cell_type_id" options="{'no_create': True, 'no_create_edit': True}" attrs="{'invisible': ['|', ('is_mixed', '=', True), ('for_which_members', '=', 'league')], 'required': ['&amp;', ('is_mixed', '=', False), ('for_which_members', '=', 'member')], 'readonly': [('members', '=', True)]}" force_save="1"/>
                                <field name="league_cell_type_id" attrs="{'invisible': ['|', ('is_mixed', '=', True), ('for_which_members', '=', 'member')], 'required': ['&amp;', ('is_mixed', '=', False), ('for_which_members', '=', 'league')], 'readonly': [('members', '=', True)]}" force_save="1"/>
                                <field name="main_office" options="{'no_create': True, 'no_create_edit': True}" string="Member Main Office" attrs="{'invisible': [('for_which_members', '=', 'league')], 'required': [('for_which_members', '=', 'member')]}" force_save="1"/>
                                <field name="main_office_league" options="{'no_create': True, 'no_create_edit': True}" string="League Main Office" attrs="{'invisible': [('for_which_members', '=', 'member')], 'required': [('for_which_members', '=', 'league')]}" force_save="1"/>
                            </group>
                            <group>
                                <field name="cell_admin" force_save="1"/>
                                <field name="cell_finance" force_save="1"/>
                                <field name="cell_assembler" force_save="1"/>
                            </group>
                        </group>
                    </div>
                    <notebook>
                        <page string="Members" name="members_ids" attrs="{'invisible': [('for_which_members', '=', 'league')]}">
                            <field name="members_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}" force_save="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="email_address"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="total_member_fee" widget="monetary" force_save="1" readonly="1"/>
                            </group>
                        </page>
                            <page string="Leaders" name="leaders_ids" attrs="{'invisible': [('for_which_members', '=', 'league')]}">
                            <field name="leaders_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}" force_save="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="email_address"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="total_leader_fee" widget="monetary" force_save="1" readonly="1"/>
                            </group>
                        </page>
                        <page string="Leagues" name="leagues_ids" attrs="{'invisible': [('for_which_members', '=', 'member')]}">
                            <field name="leagues_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}" force_save="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="email_address"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="total_league_fee" widget="monetary" force_save="1" readonly="1"/>
                            </group>
                        </page>
                        <page string="League Leaders" name="league_leaders_ids" attrs="{'invisible': [('for_which_members', '=', 'member')]}">
                            <field name="league_leaders_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}" force_save="1">
                                <tree>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="email_address"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right">
                                <field name="total_leader_league_fee" widget="monetary" force_save="1" readonly="1"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
           </form>
       </field>
   </record>

  <!-- This record will create a tree view for membership handlers parent reporting-->
  <record id="membership_reporting_tree_view" model="ir.ui.view">
    <field name="name">Membership Reporting</field>
    <field name="model">member.cells</field>
    <field name="arch" type="xml">
      <tree create="false" edit="false" duplicate="false" delete="false">
        <field name="name" string="Cell"/>
        <field name="total_leaders" string="Total Leaders"/>
        <field name="total_members" string="Total Members"/>
        <field name="total" string="Total"/>
        <field name="total_leader_fee" string="Total Leader Fees"/>
        <field name="total_member_fee" string="Total Member Fees"/>
        <field name="total_membership_fee" string="Total Fee"/>
      </tree>
    </field>
  </record>

    <record id="cell_graph" model="ir.ui.view">
        <field name="name">Cell</field>
        <field name="model">member.cells</field>
        <field name="arch" type="xml">  
            <graph string="Cell">
                <field name="name"/>
                <field name="total_membership_fee" type="measure"/>
            </graph>
        </field>
    </record>  

 <!-- This record will create an action for the membership handlers parent model reporting -->
  <record id="membership_reporting_action" model="ir.actions.act_window">
    <field name="name">Membership Reporting</field>
    <field name="res_model">member.cells</field>
    <field name="view_mode">tree,pivot,graph</field>
    <field name="view_id" ref="membership_reporting_tree_view"/>
  </record>


    <record id="main_office_action_search" model="ir.ui.view">
        <field name="name">Members' Main Office</field>
        <field name="model">main.office</field>
        <field name="arch" type="xml">
            <search string="Members' Main Office">
                <group expand="0" string="Group By" colspan="10" col="8">
                    <filter string="Members" name="members" context="{'group_by': 'for_which_members'}"/>
                    <filter string="Member Organization" name="member_org" context="{'group_by': 'member_main_type_id'}"/>
                    <filter string="League Organization" name="league_org" context="{'group_by': 'league_main_type_id'}"/>
                    <filter string="Woreda" name="woreda" context="{'group_by': 'wereda_id'}"/>
                    <filter string="Subcity" name="subcity" context="{'group_by': 'subcity_id'}"/>
                </group>
            </search>
        </field>
    </record>

   <record id="member_office_action" model="ir.actions.act_window">
       <field name="name">Member's Main Office</field>
       <field name="res_model">main.office</field>
       <field name="view_mode">tree,form,pivot,graph</field>
       <field name="search_view_id" ref="main_office_action_search"/>
       <field name="domain">['|', '|', '|', '|', '|', '|', '|',
                            ('main_admin', '=', uid),
                            ('main_assembler', '=', uid),
                            ('main_finance', '=', uid),
                            ('wereda_id.branch_manager', '=', uid),
                            ('subcity_id.parent_manager.id', '=', uid),
                            ('subcity_id.city_id.city_manager', 'in', [uid]),
                            ('subcity_id.city_id.transfer_handler', '=', uid),
                            ('subcity_id.city_id.responsible_id.system_admin', '=', uid)]</field>
   </record>

   <record id="member_office_tree" model="ir.ui.view">
       <field name="name">Member's Main Office</field>
       <field name="model">main.office</field>
       <field name="arch" type="xml">
           <tree>
                <field name="user_id" invisible="1"/>
                <field name="for_which_members" invisible="1"/>
                <field name="name"/>
                <field name="member_main_type_id"/>
                <field name="league_main_type_id"/>
                <field name="subcity_id"/>
                <field name="wereda_id"/>
                <field name="total_cell"/>
                <field name="total_cell_league"/>
           </tree>
       </field>
   </record>

   <record id="member_office_form" model="ir.ui.view">
       <field name="name">Member's Office</field>
       <field name="model">main.office</field>
       <field name="arch" type="xml">
           <form duplicate="false">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="%(meeting_eachother_action_main)d" type="action" icon="fa-users">
                            <field name="pending_meetings" string="Pending Meetings" widget="statinfo"/>
                        </button>
                        <button class="oe_stat_button" name="%(meeting_cell_action)d" type="action" icon="fa-users">
                            <field name="pending_meetings_cells" string="Pending Meetings With Cells" widget="statinfo"/>
                        </button>
                    </div>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group col="3">
                        <group>
                            <field name="cells" invisible="1"/>
                            <field name="user_id" invisible="1"/>
                            <field name="subcity_id" force_save="1" attrs="{'readonly': [('cells', '=', True)]}" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="wereda_id" force_save="1" attrs="{'readonly': [('cells', '=', True)]}" options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="for_which_members" attrs="{'readonly': [('cells', '=', True)]}"/>
                            <field name="member_main_type_id" options="{'no_create': True, 'no_create_edit': True}" attrs="{'invisible': [('for_which_members', '=', 'league')], 'required': [('for_which_members', '=', 'member')], 'readonly': [('cells', '=', True)]}"/>
                            <field name="league_main_type_id" attrs="{'invisible': [('for_which_members', '=', 'member')], 'required': [('for_which_members', '=', 'league')], 'readonly': [('cells', '=', True)]}"/>                        
                        </group>
                        <group>
                            <field name="total_cell_league" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'member')]}"/>
                            <field name="total_cell" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'league')]}"/>
                            <field name="total_league" invisible="1"/>
                            <field name="total_leagues" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'member')]}"/>
                            <field name="total_member" invisible="1"/>
                            <field name="total_members" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'league')]}"/>
                            <field name="total_league_fee" invisible="1"/>
                            <field name="total_leagues_fee" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'member')]}"/>
                            <field name="total_member_fee" invisible="1"/>
                            <field name="total_membership_fee" force_save="1" attrs="{'invisible': [('for_which_members', '=', 'league')]}"/>
                        </group>
                        <group>
                            <field name="main_admin" force_save="1"/>
                            <field name="main_finance" force_save="1"/>
                            <field name="main_assembler" force_save="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Cells" name="cell_ids" attrs="{'invisible': [('for_which_members', '=', 'league')]}">
                            <field name="cell_ids">
                                <tree>
                                    <field name="member_cell_type_id"/>
                                    <field name="name"/>
                                    <field name="main_office" string="Member Main Office"/>
                                    <field name="subcity_id"/>
                                    <field name="wereda_id"/>
                                </tree>
                            </field>
                        </page>
                        <page string="League Cells" name="league_cell_ids" attrs="{'invisible': [('for_which_members', '=', 'member')]}">
                            <field name="league_cell_ids">
                                <tree>
                                    <field name="league_cell_type_id"/>
                                    <field name="name"/>
                                    <field name="main_office_league" string="League Main Office"/>
                                    <field name="subcity_id"/>
                                    <field name="wereda_id"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Leaders" name="leader_ids" attrs="{'invisible': [('for_which_members', '=', 'league')]}">
                            <field name="leader_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}">
                                <tree>
                                    <field name="name"/>
                                    <field name="phone"/>
                                    <field name="email_address"/>
                                </tree>
                            </field>
                        </page>
                        <page string="League Leaders" name="league_leader_ids" attrs="{'invisible': [('for_which_members', '=', 'member')]}">
                            <field name="league_leader_ids" context="{'form_view_ref': 'members_custom.membership_view_partner_form'}" options="{'no_create_edit': True}"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
           </form>
       </field>
   </record>
 

   <menuitem name="Member Main Office"
            id="member_office_menu"
            parent="membership_handlers_menu"
            action="member_office_action"
            groups="members_custom.member_group_main_manager,members_custom.member_group_main_assembler,members_custom.member_group_main_finance"
            sequence="5"/>

   <menuitem name="Member Cells"
            id="member_cell_menu"
            parent="membership_handlers_menu"
            action="member_cell_action"
            groups="members_custom.member_group_cell_manager,members_custom.member_group_assembler,members_custom.member_group_finance"
            sequence="6"/>

    <menuitem id="fee_reports"
            name="Members Total and Fee Report"
            parent="menu_report_membership"
            sequence="2"
            groups="members_custom.member_group_city_admin"
            action="membership_reporting_action"/>
</odoo>
